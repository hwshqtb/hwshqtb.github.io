数的表示和运算

计算机中将可以记录的数表示为科学记数法$a * base^{power}$，其中$a$ $base$ $power$分别代表尾数、基数、阶码。其中尾数和阶码的表示在计算机中称为真值的表示。接下来是有符号数的表示，无符号数的表示同去除符号位的有符号正数。

# 基数
通常为2，目前也出现了10

# 真值
在指定基数下表示的数就是真值。对真值的表示分为两部分：符号、数值。特别的用`,`和`.`分割二者，为了叙述方便，用`|`代之两者。

在一位二进制表示符号中，0为正（有时也表示非负），1为负。在两位二进制表示中，高一位表示符号，如果两位不相同则表示溢出。

令n为尾数数值的整数部分最多位数，m为阶码数值的的整数部分最多位数。记$s_{x, i}$为$(x)_2$的第i位。

$$[x]_{原} = \begin{cases}
(x)_2 & 2^n \gt x \ge 0 \\
(2^n - x)_2 & 0 \ge x \gt -2^n \\
\end{cases}$$

$$[x]_{补} = \begin{cases}
(x)_2 & 2^n \gt x \ge 0 \\
(2^{n+1} - x)_2 & 0 \gt x \ge -2^n \\
\end{cases}$$

特别的有$[-x]_{补} = -[x]_{补}$

$$[x]_{反} = \begin{cases}
(x)_2 & 2^n \gt x \ge 0 \\
((2^{n+1} - 2^{n-k}) - x)_2 & 0 \ge x \gt -2^n，k表示数值的位数 \\
\end{cases}$$

三者关系：

- 若$x \ge 0$，$[x]_{原} = [x]_{补} = [x]_{反}$
- 若$x \ge 0$，$[x]_{补} = [x]_{反} + 2^{n-k}$，且$[x]_{反} = \sim [\left| x \right|]_{原}$

$$[x]_{移} = (x + 2^n)_2, 2^n\gt x \ge -2^n$$

# 定点表示及其运算
## 整数
$power=0$，用`,`分割符号位和数值部分。

## 纯小数
$1 \gt a \ge -1$，用`.`分割符号位和数值部分。

## 移位运算
为了表示左移$power = power + x$、右移$power = power - x$。

### 逻辑移位
二进制表示每位移动，空位补0。记为`<<<` `>>>`

### 算术移位
|真值|表示法|空位补|
|-|:-:|-|
|正数|原码、补码、反码|0|
|负数|原码|0|
|负数|补码|左移补0，右移补1|
|负数|反码|1|
记为`<<` `>>`

## 加法
### 原码加法
同普通加法

### 补码加法
$[x \pm y]_{补} = [x]_{补} \pm [y]_{补}$

**溢出判断**：

- 一位符号位下：正数+正数=负数，负数+负数=正数
- 两位符号位下：两位符号位不同

## 乘法
### 原码乘法
原码乘法只能处理同为正数的乘法：$[x * y]_{原} = [x]_{原} * [y]_{原} = [z_k]_{原}$，其中$$[z_i]_{原} = \begin{cases}0 & i = 0 \\ (s_{y,k-i+1} * (x)_2 + [z_{i-1}]_{原}) >>> 1 & otherwise.\end{cases}$$

对任意情况，$[x * y]_{原} = s_{x,0} \oplus s_{y,0} | ([\left|x\right|]_{原} * [\left|y\right|]_{原})$

### 补码一位乘法
- 乘法$y > 0$：$[x * y]_{补} = [z_k]_{补}$，其中$$[z_i]_{补} = \begin{cases}0 & i = 0 \\ (s_{y,k-i+1} * (x)_2 + [z_{i-1}]_{补}) >> 1 & otherwise.\end{cases}$$
- 乘法$y < 0$：$[x * y]_{补} = [z_k]_{补} - [x]_{补}$

### 补码Booth算法
$[x * y]_{补} = [z_{k+1}]_{补}$，其中若令$s_{y,k+1} = 0$，$$[z_i]_{补} = \begin{cases}0 & i = 0 \\ ((s_{y,k - i + 2} - s_{y,k - i + 1}) * (x)_2 + [z_{i-1}]_{补}) >> 1 & otherwise.\end{cases}$$

## 除法
除法中应约定被除数小于除数。

### 原码除法
$[\frac{x}{y}]_{原} = s_{x,0} \oplus s_{y,0} | [\frac{[\left|x\right|]_{原}}{[\left|y\right|]_{原}}]$，$[x \% y]_{原} = 0 | ([\left|x\right|]_{原} \% [\left|y\right|]_{原})$

#### 恢复余数法
$x>0,y>0$，$[\frac{x}{y}]_{原} = [z_k]_{补}$，$[x \% y]_{原} = [r_k]_{补} >>> 1$，其中$$[r_i]_{补} = \begin{cases} [x]_{补} & i = 0 \\ ([r_{i-1}]_{补}-[y]_{补}) <<< 1 & r_{i-1} \ge y \\ [r_{i-1}]_{补} <<< 1 & r_{i-1} < y\end{cases}$$ $$s_{z_k, i} = r_i \overset{?}{\ge} y$$

#### 不恢复余数法/加减交替法
$x>0,y>0$，$[\frac{x}{y}]_{原} = [z_k]_{补}$，$[x \% y]_{原} = [r_k]_{补} >>> 1$，其中$$[r_i]_{补} = \begin{cases} [x]_{补} & i = 0 \\ ([r_{i-1}]_{补}-[y]_{补}) <<< 1 & r_{i-1} \ge 0 \\ ([r_{i-1}]_{补}+[y]_{补}) <<< 1 & r_{i-1} < 0\end{cases}$$ $$s_{z_k, i} = r_i \overset{?}{\ge} y$$

### 补码除法
$[\frac{x}{y}]_{补} = [z_k]_{补}，[x \% y]_{补} = [r_k]_{补} >>> 1$，其中$$[r_i]_{补} = \begin{cases} [x]_{补} & i = 0 \\ ([r_{i-1}]_{补}-[y]_{补}) <<< 1 & s_{r_{i-1}, 0} \oplus s_{y,0} = 0 \\ ([r_{i-1}]_{补}+[y]_{补}) <<< 1 & s_{r_{i-1}, 0} \oplus s_{y,0} = 1 \end{cases}$$ $$s_{z_k, i} = s_{r_i, 0} \oplus s_{y,0}$$
特别的，将$[\frac{x}{y}]_{补}$的末位置1。

# 浮点表示
分别将尾数、阶码定点表示。

## 对阶
求阶差，保留大阶

## 尾数运算

## 规格化
规格化数：尾数最高数值位和符号位不同，但$[-2^n]$是规格化数，$[-2^{n-1}]$不是规格化数。

- 尾数运算时溢出——右规（格化）：尾数右移，阶+1；
- 尾数运算时未溢出——左规（格化）：尾数左移，阶-1；

## 舍入
- 0舍1入；
- 末位置1。

## 阶码溢出判断
阶码下溢则为0，上溢则认为溢出。