---
layout: post

title: 编程导论：2.3.数据库及其管理系统
author: hwshqtb
license: <p xmlns:cc="http://creativecommons.org/ns#" >本文的授权方式为 <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">Creative Commons Attribution 4.0 International<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt=""></a></p>
modified_date: 2025-04-08

categories: programing
tags: programing-introduction
excerpt: "简要介绍数据库及数据库管理系统知识。"
---

# 零、绪论
## 数据库、数据库管理系统及数据库系统
作为现代数据管理的重要技术，数据库基本上成为了互联网行业内的基础设施。当然，我们会从计算机的角度，通过ISO/IEC 9075-1:1999标准来分析研究它。

> ISO/IEC 9075-1:1999标准的电子整理版可以参见：https://sql-99.readthedocs.io/en/latest/
>
> 以及数据库管理系统事实上的标准：Microsoft Open Database Connectivity https://learn.microsoft.com/sql/odbc/microsoft-open-database-connectivity-odbc

**数据库**，可以视为是一种特殊的数据结构，其包含的数据类型可以归类为null、数字、字符串和BLOB（BinaryLargeOBjects，二进制大对象）。在支持传统数据结构增删查改四种功能的基础上，数据库能将数据持久化存储。通常将数据库的特点概括为：永久存储、有组织、可共享。

在数据库之上，组织协调用户与数据库沟通的组件即为**数据库管理系统**，其有以下功能：

- 数据库维护；
- 数据定义功能：提供DDL（Data Definition Language，数据定义语言），定义数据库中数据的组成和结构；
- 数据组织、存储和管理：确定数据库中数据的物理组织方式；
- 数据操纵功能：提供DML（Data Manipulation Language，数据操纵语言），通过其操纵数据库；
- 事务管理和运行管理：保证数据库及内部数据在多用户并发环境下的完整性、安全性及数据恢复。
- 通信功能：管理数据库与数据库管理系统外部交流。

**数据库系统**是将数据库、数据库管理系统（及应用开发工具）、各类用户组成的系统。在不混淆的情况下，可以将数据库系统称为数据库。

### 数据管理形态的演化
1. 人工管理阶段：20世纪50年代中期以前，由于计算机仅用于科学计算等用途，不存在数据存储的需要。
2. 文件系统阶段：至20世纪60年代，硬件存储出现，伴随着数据可以长期存储与硬件中。此时人们将数据直接存储于文件中，通过相应的文件系统访问数据。但此时由于软件的相互独立性，数据仅服务于特定的软件，数据间也基本不存在共享，冗余度较大。
3. 数据库管理系统计算：20世纪70年代的开始，数据日益丰富，同时硬件发展，使得数据库管理系统即成为可能也有必要。

| | 人工管理阶段 | 文件系统阶段| 数据库系统阶段|
|-|-|-|-|
|应用背景| 科学计算 |科学计算、数据管理| 大规模数据管理| 
|硬件背景| 无直接存取存储设备 |磁盘、磁鼓|大容量磁盘、磁盘阵列|
|软件背景|没有操作系统|有文件系统|有数据库管理系统|
|处理方式|批处理|联机实时处理、批处理|联机实时处理、分布处理、批处理|
|数据的管理者|用户（程序员）|文件系统|数据库管理系统|
|数据面向的对象|某一应用程序|某一应用|现实世界（一个部门、企业、跨国组织等）|
|数据的共享程度|无共享，冗余度极大|共享性差，冗余度大|共享性高，冗余度小|
|数据的独立性|不独立，完全依赖于程序|独立性差|具有高度的物理独立性和一定的逻辑独立性|
|数据的结构化|无结构|记录内有结构、整体无结构|整体结构化，用数据模型描述|
|数据控制能力|应用程序自己控制|应用程序自己控制|由数据库管理系统提供数据安全性、完整性、并发控制和恢复能力|

### 数据库系统的特点
1. 数据结构化：数据库存储的数据（组）具有自组织的特点，即数据（组）同时保存了各数据的一系列要求、属性，也保存了数据间的关系，具有一定的联系。整体上来看，相较于文件系统方式而言，数据库系统去除了（在文件系统上）文件间无关系的问题，实现了整体的结构化。
2. 数据的共享性高、冗余度低且易扩充：数据库系统从**整体角度**看待和描述数据，数据不再面向某个应用而是面向整个系统，因此数据可以被多个用户、多个应用共享使用。数据共享可以大大减少数据冗余，节约存储空间。数据共享还能够避免数据之间的不相容性与不一致性。而且数据库容易增加新的应用，这就使得数据库系统弹性大，易于扩充，可以适应各种用户的要求。
3. 数据独立性高：数据独立性是借助数据库管理数据的一个显著优点，包括数据的物理独立性和逻辑独立性。数据与程序的独立把数据的定义从程序中分离出去，加上存取数据的方法又由数据库管理系统负责提供，从而简化了应用程序的编制，大大减少了应用程序的维护和修改。
    - 物理独立性是指用户的应用程序与数据库中数据的物理存储是相互独立的。也就是 说，数据在数据库中怎样存储是由数据库管理系统管理的，用户程序不需要了解，应用程序要处理的只是数据的逻辑结构，这样当数据的物理存储改变时应用程序不用改变。
    - 逻辑独立性是指用户的应用程序与数据库的逻辑结构是相互独立的。也就是说，数据 的逻辑结构改变时用户程序也可以不变。
4. 数据由数据库管理系统统一管理和控制
数据库的共享将会带来数据库的安全隐患，而数据库的共享是并发的共享。另外，数据库中数据的正确与一致也必须得到保障。为此，数据库管理系统提供以下几方面的数据控制功能。
	- 数据的安全性保护：保护数据以防止不合法使用造成的数据泄密和破坏。每个用户只能按规定对某些数据以某些方式进行使用和处理。
	- 数据的完整性检查：将数据控制在有效的范围内，并保证数据之间满足一定的关系，保证数据的正确性、有效性和相容性。
	- 并发控制：对多用户的并发操作加以控制和协调。
	- 数据库恢复：将数据库从错误状态恢复到某一已知的正确状态。

综上所述，数据库是长期存储在计算机内有组织、大量、共享的数据集合。它可以供各种用户共享，具有最小冗余度和较高的数据独立性。数据库管理系统在数据库建立、运用和维护时对数据库进行统一控制，以保证数据的完整性和安全性，并在多用户同时使用数据库时进行并发控制，在发生故障后对数据库进行恢复。

数据库系统的出现使信息系统从以加工数据的程序为中心转向围绕**共享的数据库为中心**的新阶段。

## 构建数据模型
数据模型是为了解决实际问题而给出的抽象化模型，是数据库系统的核心和基础。

### 概念模型
也称信息模型，它是按用户的观点来对数据和信息建模，主要用于数据库设计。概念模型应该具有较强的语义表达能力，能够方便、直接地表达应用中的各种语义知识，另一方面它还应该简单、清晰、易于用户理解。

组成部分有

- 实体
- 属性：实体的某一特性。应当**不可分**。
- 码/键：唯一标识实体的属性集。
- 实体型：实体名及其属性名集合，用于抽象和刻画同类实体。
- 实体集：同一类型实体的集合称为实体集。
- 联系：实体之间的联系通常是指不同实体集之间的联系，有一对一、一对多和多对多等多种类型。

表示方法——实体-联系图（E-R图）：矩形表示实体（名），圆角矩形表示属性，星形表示联系（名），用直线连接，在连接联系（名）与实体（名）的直线上标注联系的类型：一对一1:1、一对多1:n和多对多m:n。

### 逻辑模型
逻辑模型是概念模型的细化，旨在明确数据实体的属性、关系和约束。明确实体名称、属性的数据类型和精度，定义主键、唯一索引以及实体之间的关系。

常见的逻辑模型有：
1. 层次模型：实体间构成树。
2. 网状模型：实体间构成DAG。和层次模型统称为结构化模型。
3. 关系模型：实体间构成线性表。这是大多数数据库所采取的逻辑模型。
4. 面向对象模型：实体作为对象。
5. 对象关系模型：综合关系模型和面向对象模型。
6. 半结构化数据模型：以xml或类xml形式组织实体。

### 物理模型
物理模型通常由数据结构、数据操作和数据的完整性约束条件三部分组成。

1. 数据结构：描述数据库的组成对象以及对象之间的联系，是所描述的对象类型的集合，是对系统静态特性的描述。
2. 数据操作：指对数据库中各种对象（型）的实例（值）允许执行的操作的集合，是对系统动态特性的描述，包括操作及有关的操作规则。数据库主要有查询和更新（包括插入、删除、修改）两大类操作。数据模型必须定义这些操作的确切含义、操作符号、操作规则（如优先级）以及实现操作的语言。
3. 数据的完整性约束条件：一组完整性规则，数据及其联系所具有的制约和依存规则，用以限定符合数据模型的数据库状态以及状态的变化，以保证数据的正确、有效和相容。 数据模型应该反映和规定其必须遵守的基本的和通用的完整性约束条件，还应该提供定义完整性约束条件的机制，以反映具体应用所涉及的数据必须遵守的特定的语义约束条件。

## 数据库系统的结构和组成
通常将数据库系统的逻辑结构和特征统称为模式，数据的集体称为实例。

### 模式
数据库系统将模式拆分为三个级别，与数据模型的三种相对应。

#### 逻辑模式
逻辑模式，也称模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图。它是数据库系统模式结构的中间层，既不涉及数据的物理存储细节和硬件环境，又与具体的应用程序、所使用的应用开发工具及高级程序设计语言无关。模式实际上是数据库数据在逻辑级上的视图。一个数据库只有一个模式。

数据库模式以某一种逻辑模型为基础，统一综合地考虑了所有用户的需求，并将这些需求有机地结合成一个逻辑整体。定义模式时不仅要定义数据的逻辑结构，而且要定义数据之间的联系，定义数据的完整性约束条件。

数据库管理系统提供模式数据定义语言（模式 DDL）来严格地定义模式。

#### 外模式
外模式也称子模式或用户模式，它是数据库用户可见局部数据的逻辑结构和特征的描述，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。外模式所表示的内容通常是模式所表示的内容的子集。一个数据库可以有多个外模式。

由于它是各个用户的数据视图，如果不同用户的需求存在差异，则其外模式描述就是不同的。另一方面，同一外模式也可以为某一用户的多个应用系统所使用。每个用户只能看见和访问所对应的外模式中的数据，数据库中的其余数据是不可见的。

数据库管理系统提供外模式数据定义语言（外模式DDL）来严格地定义外模式。

#### 内模式
内模式也称存储模式，是数据物理结构和存储方式的描述，是数据在数据库内部的组织方式。一个数据库只有一个内模式。

### 数据库的二级映像功能与数据独立性
为了能够在系统内部实现这三级模式的联系和转换，数据库管理系统在这三级模式之间提供了两层映像：外模式/模式映像和模式/内模式映像。正是这两层映像保证了数据库系统中的数据能够具有较高的逻辑独立性和物理独立性。

- 外模式/模式映像：当模式改变时(例如增加新的关系、新的属性、改变属性的数据类型等)，由数据库管理员对各个外模式/模式的映像作相应改变，可以使外模式保持不变。应用程序是依据数据的外模式编写的，从而应用程序不必修改，保证了数据与程序的逻辑独立性，简称数据的逻辑独立性。
- 模式/内模式映像：当数据库的存储结构改变时，由数据库管理员对模式/内模式映像作相应改变，可以使模式保持不变，从而应用程序也不必改变。保证了数据与程序的物理独立性。

### 数据库系统的组成
上述的内容在现实中就形成了以下数据库系统的组成：

- 硬件系统
- 数据库
- 数据库管理系统
- 用户
    - 管理员
	  - 系统分析员
    - 程序员
    - 最终用户

# 一、关系数据库
## 关系模型
为了严谨的定义关系模型，首先需要定义一些概念：

||定义|类比二维表|
|-|-|-|
|域（domain）|一组具有相同数据类型的值的集合|某一量的可选范围|
|关系（relation）|若干域$D_i$的笛卡尔积的子集|一张二维表|
|属性（attribute）|关系在某一域上包含元素的集合|二维表的某一列|
|元组（tuple）|关系的某一元素|二维表的某一行|
|分量|元组在某一属性的值|某一行的某一列值|
|超码/超键（super key）|||
|候选码/候选键（candidate key）|完全函数确定关系的某属性组|能够唯一标识每一列的、但是其子集不能的属性组|
|主码/主键（primary key）|其中一个候选码||
|主属性（primary attribute）|候选码包含的属性||

这里只简单勾画一下关系模型。从用户观点看，关系模型由一组关系组成。每个关系的数据结构是一张规范化的二维表。下面以学生登记表（如图 1.14 所示）为例，介绍关系模型中的一些术语。 学生登记表 学号 姓 名 年 龄 性 别 系名 年级 2013004 王小明 19 女 社会学 2013 2013006 黄大鹏 20 男 商品学 2013 2013008 张文斌 18 女 法律 2013 图 1.14 关系模型的数据结构 关系(relation)：一个关系对应通常说的一张表，例如图 1.14 中的这张学生登记表。 元组(tuple)：表中的一行即为一个元组。 属性(attribute):表中的一列即为一个属性,给每一个属性起一个名称即属性名。如图1.14所示的表有6列,对应6个属性(学号,姓名,年龄,性别,系名和年级)。 码（key）：也称为码键。表中的某个属性组，它可以唯一确定一个元组，如图 1.14中的学号可以唯一确定一个学生，也就成为本关系的码。 域(domain):域是属性的取值范围来自某个域。如人的年龄一般在1~120岁之间,大学生年龄属性的域是(15~45岁)，性别的域是(男，女),系名的域是一个学校所有系名的集合。 分量：元组中的一个属性值。
关系模型中的数据操作是集合操作,操作对象和操作结果都是关系,即若干元组的集合,而不像格式化模型中那样是单记录的操作方式。另一方面,关系模型把存取路径向用户隐蔽起来，用户只要指出“干什么”或“找什么”，不必详细说明“怎么干”或“怎么找”，从而大大地提高了数据的独立性，提高了用户生产率。 3. 关系模型的优缺点 关系模型具有下列优点： (1)关系模型与格式化模型不同,它是建立在严格的数学概念的基础上的。 (2)关系模型的概念单一。无论实体还是实体之间的联系都用关系来表示。对数据的检索和更新结果也是关系(即表)。所以其数据结构简单、清晰,用户易懂易用。 (3)关系模型的存取路径对用户透明,从而具有更高的数据独立性、更好的安全保密性,也简化了程序员的工作和数据库开发建立的工作。 所以关系模型诞生以后发展迅速,深受用户的喜爱。 当然，关系模型也有缺点，例如，由于存取路径对用户是隐蔽的，查询效率往往不如格式化数据模型。为了提高性能,数据库管理系统必须对用户的查询请求进行优化,因此增加了开发数据库管理系统的难度。不过用户不必考虑这些系统内部的优化技术细节。
